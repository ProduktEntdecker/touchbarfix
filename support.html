<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TouchBarFix Support - Help & FAQ</title>
    <meta name="description" content="TouchBarFix support, frequently asked questions, and troubleshooting guide for MacBook Pro Touch Bar issues.">
    <link rel="icon" href="Assets/favicon.ico" type="image/x-icon">
    
    <!-- Tailwind CSS -->
    <link rel="stylesheet" href="dist/tailwind.css">
    
    <!-- Plausible Analytics -->
    <script defer data-domain="touchbarfix.com" src="https://plausible.io/js/script.file-downloads.outbound-links.tagged-events.js"></script>
    <script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", system-ui, sans-serif;
            line-height: 1.6;
            color: #1d1d1f;
            background: #f5f5f7;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 42px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #1d1d1f;
        }

        .subtitle {
            font-size: 21px;
            color: #86868b;
            font-weight: 400;
        }

        .back-link {
            display: inline-block;
            color: #007aff;
            text-decoration: none;
            margin-bottom: 20px;
            font-size: 17px;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .section {
            background: white;
            padding: 40px;
            border-radius: 12px;
            margin-bottom: 40px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .section h2 {
            font-size: 28px;
            margin-bottom: 20px;
            color: #1d1d1f;
        }

        .faq-item {
            margin-bottom: 24px;
            padding-bottom: 24px;
            border-bottom: 1px solid #f0f0f0;
        }

        .faq-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .faq-question {
            font-size: 18px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 8px;
        }

        .faq-answer {
            font-size: 16px;
            color: #1d1d1f;
            line-height: 1.5;
        }

        .faq-answer code {
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
        }

        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 16px;
            border-radius: 8px;
            margin: 16px 0;
        }

        .warning p {
            color: #856404;
            font-size: 15px;
            margin: 0;
        }

        /* Contact Form */
        .contact-form {
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #1d1d1f;
        }

        input[type="text"], 
        input[type="email"], 
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 1px solid #d0d0d0;
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #007aff;
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        textarea {
            height: 120px;
            resize: vertical;
        }

        .submit-button {
            background: #007aff;
            color: white;
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            font-size: 17px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .submit-button:hover {
            background: #0056cc;
        }

        /* Steps */
        .steps {
            counter-reset: step-counter;
        }

        .step {
            counter-increment: step-counter;
            margin-bottom: 20px;
            display: flex;
            align-items: flex-start;
        }

        .step::before {
            content: counter(step-counter);
            background: #007aff;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            margin-right: 12px;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .step-content {
            flex: 1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 20px 16px;
            }

            h1 {
                font-size: 32px;
            }

            .subtitle {
                font-size: 18px;
            }

            .section {
                padding: 24px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 16px 12px;
            }

            h1 {
                font-size: 28px;
            }

            .section {
                padding: 20px;
            }
        }
    </style>
</head>
<body class="bg-white">
    
    <!-- Header -->
    <header class="bg-white border-b border-gray-200">
        <div class="max-w-4xl mx-auto px-4 py-4 flex items-center justify-between">
            <a href="/" class="flex items-center space-x-2">
                <div class="w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center">
                    <span class="text-white font-bold text-sm">TB</span>
                </div>
                <span class="font-bold text-xl text-gray-900">TouchBarFix</span>
            </a>
            <nav class="flex space-x-6">
                <a href="/" class="text-gray-600 hover:text-gray-900 transition-colors">Home</a>
                <a href="/support.html" class="text-gray-900 font-semibold transition-colors">Support</a>
            </nav>
        </div>
    </header>

    <div class="container">
        <header>
            <h1>TouchBarFix Support</h1>
            <p class="subtitle">Help, FAQ, and troubleshooting</p>
        </header>

        <section class="section">
            <h2>How to Use TouchBarFix</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-content">
                        <strong>Launch TouchBarFix.app</strong> from your Applications folder
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <strong>Enter your password</strong> when prompted (needed to restart system processes)
                    </div>
                </div>
                <div class="step">
                    <div class="step-content">
                        <strong>Wait for completion</strong> - TouchBarFix will restart the Touch Bar and show a success message
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Frequently Asked Questions</h2>
            
            <div class="faq-item">
                <div class="faq-question">Does TouchBarFix require my password?</div>
                <div class="faq-answer">No! TouchBarFix runs entirely in user space and doesn't require administrator privileges. The app restarts Touch Bar processes that belong to your user account, so no password is needed.</div>
            </div>

            <div class="faq-item">
                <div class="faq-question">TouchBarFix didn't work. What now?</div>
                <div class="faq-answer">
                    <p>If TouchBarFix doesn't solve your issue, you likely have a hardware problem rather than software. Try:</p>
                    <ul style="margin: 8px 0 0 20px;">
                        <li>Restart your MacBook completely</li>
                        <li>Reset SMC (System Management Controller)</li>
                        <li>Contact Apple Support for hardware diagnosis</li>
                    </ul>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Can I do this for free with Terminal?</div>
                <div class="faq-answer">Yes! Open Terminal and run <code>pkill TouchBarServer</code> and <code>killall ControlStrip</code>. TouchBarFix is just a convenient app interface for these commands (no sudo needed).</div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Which MacBooks does this work on?</div>
                <div class="faq-answer">TouchBarFix works on MacBook Pro models from 2016‚Äì2021 that have the Touch Bar. It requires macOS 11 (Big Sur) through macOS 14 (Sonoma).</div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Does TouchBarFix prevent future freezing?</div>
                <div class="faq-answer">No, TouchBarFix only restarts frozen processes. It doesn't prevent Touch Bar issues from happening again. If your Touch Bar freezes frequently, you may have a hardware problem.</div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Is TouchBarFix safe to use?</div>
                <div class="faq-answer">Yes, TouchBarFix is fully notarized by Apple and only runs standard system commands. It doesn't modify any files or install background processes.</div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Can I get a refund?</div>
                <div class="faq-answer">If TouchBarFix doesn't work as described, contact us using the form below for a full refund.</div>
            </div>
        </section>

        <section class="section">
            <h2>Troubleshooting</h2>
            
            <div class="faq-item">
                <div class="faq-question">Touch Bar still frozen after using TouchBarFix</div>
                <div class="faq-answer">
                    <p>This usually means you have a hardware issue. Try these steps:</p>
                    <div class="steps">
                        <div class="step">
                            <div class="step-content">Restart your MacBook completely (not just sleep/wake)</div>
                        </div>
                        <div class="step">
                            <div class="step-content">Try TouchBarFix again after restart</div>
                        </div>
                        <div class="step">
                            <div class="step-content">If still not working, contact Apple Support - likely hardware failure</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">"TouchBarFix can't be opened" error</div>
                <div class="faq-answer">
                    <p>This happens when macOS blocks the app. To fix:</p>
                    <div class="steps">
                        <div class="step">
                            <div class="step-content">Go to System Settings ‚Üí Privacy & Security</div>
                        </div>
                        <div class="step">
                            <div class="step-content">Look for a message about TouchBarFix being blocked</div>
                        </div>
                        <div class="step">
                            <div class="step-content">Click "Open Anyway" to allow TouchBarFix</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="warning">
                <p><strong>Hardware vs Software Issues:</strong> TouchBarFix only fixes software problems where the Touch Bar process has crashed. If your Touch Bar has physical damage, water damage, or genuine hardware failure, TouchBarFix cannot help.</p>
            </div>
        </section>

        <section class="section">
            <h2>Contact Support</h2>
            <p>Have a question not covered above? Send us a message:</p>
            
            <form class="contact-form" id="support-form">
                <div class="form-group">
                    <label for="name">Your Name</label>
                    <input type="text" id="name" name="name" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="macbook-model">MacBook Model (if relevant)</label>
                    <select id="macbook-model" name="macbook-model">
                        <option value="">Select your MacBook</option>
                        <option value="MacBook Pro 13-inch 2016">MacBook Pro 13-inch 2016</option>
                        <option value="MacBook Pro 15-inch 2016">MacBook Pro 15-inch 2016</option>
                        <option value="MacBook Pro 13-inch 2017">MacBook Pro 13-inch 2017</option>
                        <option value="MacBook Pro 15-inch 2017">MacBook Pro 15-inch 2017</option>
                        <option value="MacBook Pro 13-inch 2018">MacBook Pro 13-inch 2018</option>
                        <option value="MacBook Pro 15-inch 2018">MacBook Pro 15-inch 2018</option>
                        <option value="MacBook Pro 13-inch 2019">MacBook Pro 13-inch 2019</option>
                        <option value="MacBook Pro 16-inch 2019">MacBook Pro 16-inch 2019</option>
                        <option value="MacBook Pro 13-inch 2020">MacBook Pro 13-inch 2020</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="issue-type">Issue Type</label>
                    <select id="issue-type" name="issue-type">
                        <option value="">Select issue type</option>
                        <option value="TouchBarFix not working">TouchBarFix not working</option>
                        <option value="Installation problem">Installation problem</option>
                        <option value="Refund request">Refund request</option>
                        <option value="General question">General question</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="message">Message</label>
                    <textarea id="message" name="message" placeholder="Please describe your issue or question..." required></textarea>
                </div>
                
                <button type="button" class="submit-button" onclick="sendEmail()">Send Message</button>
            </form>
        </section>

        <!-- Feedback Section -->
        <section id="feedback" class="py-20 bg-white">
            <div class="max-w-4xl mx-auto text-center px-4">
                <h2 class="text-4xl font-bold text-gray-900 mb-6">
                    Help Us Improve TouchBarFix
                </h2>
                <p class="text-xl text-gray-600 mb-12 max-w-2xl mx-auto">
                    Your feedback helps us make TouchBarFix better for everyone.
                </p>
                
                <div class="max-w-2xl mx-auto">
                    <form id="feedback-form" class="space-y-6 text-left">
                        <!-- Email -->
                        <div>
                            <label for="feedback-email" class="block text-sm font-medium text-gray-700 mb-2">
                                Email
                            </label>
                            <input type="email" id="feedback-email" name="feedback-email" required
                                   placeholder="your.email@example.com"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>

                        <!-- Feedback Message -->
                        <div>
                            <label for="feedback-message" class="block text-sm font-medium text-gray-700 mb-2">
                                Your Feedback
                            </label>
                            <textarea id="feedback-message" name="feedback-message" rows="5" required
                                      placeholder="Tell us about your experience with TouchBarFix..."
                                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-vertical"></textarea>
                        </div>

                        <!-- Hidden fields for auto-detected info -->
                        <input type="hidden" id="user-agent" name="user-agent">
                        <input type="hidden" id="detected-os" name="detected-os">
                        <input type="hidden" id="detected-device" name="detected-device">

                        <!-- Submit Button -->
                        <div class="text-center pt-4">
                            <button type="submit" 
                                    class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg text-lg font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                                Send Feedback
                            </button>
                            <p class="mt-3 text-xs text-gray-500">
                                We automatically detect your macOS version and device type to help with debugging. No personal data is collected.
                            </p>
                        </div>
                    </form>

                    <!-- Success Message (Hidden by default) -->
                    <div id="feedback-success" class="hidden bg-blue-50 border border-blue-200 rounded-lg p-6 text-center">
                        <div class="text-4xl mb-4">üìß</div>
                        <h3 class="text-xl font-bold text-blue-800 mb-2">Check Your Email Client</h3>
                        <p class="text-blue-700">
                            We've opened a pre-filled email for you. Please review and press Send in your email client to deliver your feedback.
                        </p>
                    </div>

                    <!-- Error Message (Hidden by default) -->
                    <div id="feedback-error" class="hidden bg-red-50 border border-red-200 rounded-lg p-6 text-center">
                        <div class="text-4xl mb-4">‚ùå</div>
                        <h3 class="text-xl font-bold text-red-800 mb-2">Oops! Something went wrong</h3>
                        <p class="text-red-700 mb-4">
                            We couldn't send your feedback right now. Please try again or email us directly at:
                        </p>
                        <a href="mailto:info@produktentdecker.com" class="text-blue-600 hover:text-blue-800 font-semibold">
                            info@produktentdecker.com
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="max-w-4xl mx-auto text-center px-4">
            <h3 class="text-2xl font-bold mb-4">TouchBarFix</h3>
            <p class="text-gray-400 mb-6">Simple automation for Touch Bar software restarts</p>
            
            <div class="flex justify-center space-x-6 mb-6">
                <a href="/support.html" class="text-gray-400 hover:text-white transition-colors">Support</a>
                <a href="/terms.html" class="text-gray-400 hover:text-white transition-colors">Terms</a>
                <a href="/privacy.html" class="text-gray-400 hover:text-white transition-colors">Privacy</a>
                <a href="/imprint.html" class="text-gray-400 hover:text-white transition-colors">Imprint</a>
            </div>
            
            <p class="text-gray-500 text-sm">
                ¬© 2025 TouchBarFix ‚Ä¢ Created by Dr. Florian Steiner, AI Product Manager ‚Ä¢ Co-created with Claude Code
            </p>
        </div>
    </footer>

    <script>
        function sendEmail() {
            // Get form values
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const macbook = document.getElementById('macbook-model').value || 'Not specified';
            const issueType = document.getElementById('issue-type').value || 'Not specified';
            const message = document.getElementById('message').value;
            
            // Validate form
            if (!name || !email || !message) {
                alert('Please fill in all required fields');
                return;
            }
            
            // Construct email body
            const emailBody = `TouchBarFix Support Request
            
From: ${name} (${email})
MacBook Model: ${macbook}
Issue Type: ${issueType}

Message:
${message}`;
            
            // Create mailto link with encoded parameters
            const subject = encodeURIComponent('TouchBarFix Support: ' + issueType);
            const body = encodeURIComponent(emailBody);
            const mailtoLink = `mailto:florian.steiner@mac.com?subject=${subject}&body=${body}`;
            
            // Open email client
            window.location.href = mailtoLink;
            
            // Show success notification
            const successMessage = document.createElement('div');
            successMessage.innerHTML = `
                <div style="position: fixed; top: 20px; right: 20px; background: #34c759; color: white; padding: 16px 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 1000;">
                    ‚úÖ Opening your email client...
                </div>
            `;
            document.body.appendChild(successMessage);
            
            // Remove success message after 3 seconds
            setTimeout(() => {
                successMessage.remove();
            }, 3000);
            
            // Reset form
            document.getElementById('support-form').reset();
        }

        // Feedback Form JavaScript
        // Auto-detect user's system information
        function detectSystemInfo() {
            const userAgent = navigator.userAgent;
            let osVersion = 'Unknown';
            let deviceInfo = 'Unknown';
            
            // Detect macOS version from user agent
            if (userAgent.includes('Mac OS X')) {
                const match = userAgent.match(/Mac OS X (\d+)[_.](\d+)/);
                if (match) {
                    const majorVersion = parseInt(match[1]);
                    const minorVersion = parseInt(match[2]);
                    
                    // Map macOS versions
                    if (majorVersion === 10) {
                        if (minorVersion === 15) osVersion = 'macOS Catalina (10.15)';
                        else if (minorVersion === 14) osVersion = 'macOS Mojave (10.14)';
                    } else if (majorVersion === 11) {
                        osVersion = 'macOS Big Sur (11.x)';
                    } else if (majorVersion === 12) {
                        osVersion = 'macOS Monterey (12.x)';
                    } else if (majorVersion === 13) {
                        osVersion = 'macOS Ventura (13.x)';
                    } else if (majorVersion === 14) {
                        osVersion = 'macOS Sonoma (14.x)';
                    } else if (majorVersion === 15) {
                        osVersion = 'macOS Sequoia (15.x)';
                    }
                }
                
                // Detect if it's Intel or Apple Silicon
                if (userAgent.includes('Intel')) {
                    deviceInfo = 'Intel Mac';
                } else if (userAgent.includes('ARM') || userAgent.includes('Apple')) {
                    deviceInfo = 'Apple Silicon Mac';
                } else {
                    // Default for Macs where we can't determine architecture
                    deviceInfo = 'Mac (architecture unknown)';
                }
            }
            
            // Set hidden field values if they exist
            const userAgentField = document.getElementById('user-agent');
            const detectedOsField = document.getElementById('detected-os');
            const detectedDeviceField = document.getElementById('detected-device');
            
            if (userAgentField) userAgentField.value = userAgent;
            if (detectedOsField) detectedOsField.value = osVersion;
            if (detectedDeviceField) detectedDeviceField.value = deviceInfo;
            
            return { osVersion, deviceInfo, userAgent };
        }
        
        // Detect system info on page load
        document.addEventListener('DOMContentLoaded', detectSystemInfo);
        
        // Check if feedback form exists before adding event listener
        const feedbackForm = document.getElementById('feedback-form');
        if (feedbackForm) {
            feedbackForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                // Get system info
                const systemInfo = detectSystemInfo();
                
                // Get form data
                const formData = new FormData(e.target);
                const feedbackData = {
                    email: formData.get('feedback-email'),
                    message: formData.get('feedback-message'),
                    detectedOS: systemInfo.osVersion,
                    detectedDevice: systemInfo.deviceInfo,
                    userAgent: systemInfo.userAgent,
                    timestamp: new Date().toISOString(),
                    source: 'support-page-feedback-form'
                };

                // Track feedback submission with analytics
                if (window.plausible) {
                    window.plausible('Feedback Form Submit', {
                        props: { 
                            os: feedbackData.detectedOS,
                            device: feedbackData.detectedDevice
                        }
                    });
                }

                // Hide any previous messages
                document.getElementById('feedback-success').classList.add('hidden');
                document.getElementById('feedback-error').classList.add('hidden');

                // Disable submit button and show loading state
                const submitButton = e.target.querySelector('button[type="submit"]');
                const originalText = submitButton.textContent;
                submitButton.disabled = true;
                submitButton.textContent = 'Sending...';

                try {
                    // For now, we'll use a simple mailto link as fallback
                    // Later this can be replaced with a proper backend endpoint
                    const subject = encodeURIComponent('TouchBarFix Feedback');
                    const body = encodeURIComponent(`
From: ${feedbackData.email}

Message:
${feedbackData.message}

---
System Information (Auto-detected):
OS: ${feedbackData.detectedOS}
Device: ${feedbackData.detectedDevice}
User Agent: ${feedbackData.userAgent}

Submitted: ${feedbackData.timestamp}
Source: ${feedbackData.source}
                    `);

                    // Simulate form processing for now
                    // In production, this would be an actual API call
                    await new Promise(resolve => setTimeout(resolve, 1000));

                    // For now, open mailto link
                    const mailtoLink = `mailto:info@produktentdecker.com?subject=${subject}&body=${body}`;
                    
                    // Try to open email client, but show success message either way
                    try {
                        window.location.href = mailtoLink;
                    } catch (err) {
                        // If mailto fails, just continue to show success message
                    }

                    // Show instruction message (not claiming receipt yet)
                    document.getElementById('feedback-form').classList.add('hidden');
                    document.getElementById('feedback-success').classList.remove('hidden');

                    // Track that email client was opened (not that feedback was sent)
                    if (window.plausible) {
                        window.plausible('Feedback Email Client Opened');
                    }

                } catch (error) {
                    console.error('Feedback form error:', error);
                    
                    // Show error message
                    document.getElementById('feedback-error').classList.remove('hidden');

                    // Track error
                    if (window.plausible) {
                        window.plausible('Feedback Form Error', {
                            props: { error: 'submission-failed' }
                        });
                    }

                } finally {
                    // Reset button state
                    submitButton.disabled = false;
                    submitButton.textContent = originalText;
                }
            });
        }

        // Add smooth scrolling to feedback section if accessed via URL hash
        if (window.location.hash === '#feedback') {
            const feedbackSection = document.getElementById('feedback');
            if (feedbackSection) {
                feedbackSection.scrollIntoView({ behavior: 'smooth' });
            }
        }
    </script>

</body>
</html>